# Twin Gate å°ˆæ¡ˆæŠ€è¡“æ£§è¦æ ¼

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹æ¦‚è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React Web App â”‚    â”‚   Node.js API   â”‚    â”‚   Twin3.ai API  â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ React 18      â”‚    â”‚ â€¢ Express.js    â”‚    â”‚ â€¢ é©—è­‰æœå‹™       â”‚
â”‚ â€¢ TypeScript    â”‚    â”‚ â€¢ PostgreSQL    â”‚    â”‚ â€¢ åˆ†æ•¸è¨ˆç®—       â”‚
â”‚ â€¢ Tailwind CSS  â”‚    â”‚ â€¢ åŸç”Ÿ SQL      â”‚    â”‚ â€¢ å›èª¿é€šçŸ¥       â”‚
â”‚ â€¢ shadcn/ui     â”‚    â”‚ â€¢ JWT Auth      â”‚    â”‚                 â”‚
â”‚ â€¢ Web3.js       â”‚    â”‚ â€¢ Web3.js       â”‚    â”‚                 â”‚
â”‚ â€¢ LINE LIFF SDK â”‚    â”‚                 â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Bots    â”‚            â”‚PostgreSQLâ”‚            â”‚Blockchainâ”‚
    â”‚Telegram â”‚            â”‚Database â”‚            â”‚ Network â”‚
    â”‚Discord  â”‚            â”‚Firebase â”‚            â”‚         â”‚
    â”‚LINE     â”‚            â”‚         â”‚            â”‚         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ å¾Œç«¯ API æŠ€è¡“æ£§

### æ ¸å¿ƒæ¡†æ¶
- **Runtime**: Node.js 18+
- **Web Framework**: Express.js 4.18+
- **Language**: JavaScript (ES6+)

### è³‡æ–™åº«
- **ä¸»è³‡æ–™åº«**: PostgreSQL 14+
- **æŸ¥è©¢æ–¹å¼**: åŸç”Ÿ SQL
- **é€£æ¥æ± **: pg-pool
- **å‚™é¸è³‡æ–™åº«**: Firebase Realtime Database

### èªè­‰èˆ‡å®‰å…¨
- **èªè­‰**: JSON Web Tokens (JWT)
- **å¯†ç¢¼åŠ å¯†**: bcryptjs
- **å®‰å…¨ä¸­é–“ä»¶**: 
  - Helmet.js (å®‰å…¨æ¨™é ­)
  - CORS (è·¨åŸŸè³‡æºå…±äº«)
  - express-rate-limit (é€Ÿç‡é™åˆ¶)
- **è¼¸å…¥é©—è­‰**: express-validator

### å€å¡Šéˆæ•´åˆ
- **Web3 åº«**: Web3.js 4.0+
- **ç¶²è·¯**: Ethereum/Polygon
- **åˆç´„**: ERC-721 (SBT)

### HTTP å®¢æˆ¶ç«¯
- **API è«‹æ±‚**: Axios
- **è«‹æ±‚æ””æˆª**: Axios interceptors

### æ—¥èªŒèˆ‡ç›£æ§
- **æ—¥èªŒ**: Winston
- **æ—¥èªŒæ ¼å¼**: JSON structured logging

## ğŸŒ å‰ç«¯ Web App æŠ€è¡“æ£§

### æ ¸å¿ƒæ¡†æ¶
- **Framework**: React 18
- **Build Tool**: Vite
- **Language**: TypeScript
- **è·¯ç”±**: React Router 6

### UI æ¡†æ¶
- **CSS Framework**: Tailwind CSS 3.4+
- **UI Components**: shadcn/ui
- **åœ–æ¨™**: Lucide React
- **å‹•ç•«**: Tailwind CSS Animate

### ç‹€æ…‹ç®¡ç†
- **è¡¨å–®**: React Hook Form + Zod
- **HTTP å®¢æˆ¶ç«¯**: Axios
- **ç‹€æ…‹**: React Context + useState/useReducer

### æ•´åˆæœå‹™
- **å€å¡Šéˆ**: Web3.js
- **LINE æ•´åˆ**: LINE LIFF SDK
- **é©—è­‰**: Twin3.ai API

### é–‹ç™¼å·¥å…·
- **TypeScript**: 5.2+
- **ESLint**: 8.55+
- **PostCSS**: 8.4+
- **Autoprefixer**: 10.4+

## ğŸ¤– Bot æŠ€è¡“æ£§

### Telegram Bot
- **ä¸»æ¡†æ¶**: node-telegram-bot-api æˆ– telegraf.js
- **Runtime**: Node.js 18+
- **Language**: JavaScript (ES6+)

### Discord Bot
- **ä¸»æ¡†æ¶**: discord.js 14+
- **åŠŸèƒ½**: Slash Commands, Interactions
- **Runtime**: Node.js 18+
- **Language**: JavaScript (ES6+)

### LINE Bot
- **ä¸»æ¡†æ¶**: LINE Messaging API SDK
- **æ•´åˆ**: LINE LIFF (å‰ç«¯)
- **Runtime**: Node.js 18+
- **Language**: JavaScript (ES6+)

### å…±ç”¨åŠŸèƒ½
- **HTTP å®¢æˆ¶ç«¯**: Axios
- **æ—¥èªŒ**: Winston
- **æ’ç¨‹**: node-cron
- **å·¥å…·**: Lodash, Moment.js

## ğŸ“¦ ä¾è³´ç®¡ç†

### å¾Œç«¯ä¸»è¦ä¾è³´
```json
{
  "express": "^4.18.2",
  "pg": "^8.11.0",
  "pg-pool": "^3.6.0",
  "bcryptjs": "^2.4.3",
  "jsonwebtoken": "^9.0.2",
  "web3": "^4.3.0",
  "firebase-admin": "^11.9.0",
  "axios": "^1.6.2",
  "winston": "^3.8.2",
  "helmet": "^7.1.0",
  "cors": "^2.8.5",
  "express-rate-limit": "^7.1.5",
  "express-validator": "^7.0.1"
}
```

### å‰ç«¯ä¸»è¦ä¾è³´
```json
{
  "react": "^18.2.0",
  "react-dom": "^18.2.0",
  "react-router-dom": "^6.8.0",
  "typescript": "^5.2.2",
  "vite": "^5.0.8",
  "tailwindcss": "^3.4.0",
  "axios": "^1.6.2",
  "web3": "^4.3.0",
  "@line/liff": "^2.23.0",
  "react-hook-form": "^7.48.2",
  "zod": "^3.22.4"
}
```

### Bot ä¸»è¦ä¾è³´
```json
{
  "node-telegram-bot-api": "^0.64.0",
  "telegraf": "^4.15.6",
  "discord.js": "^14.14.1",
  "@line/bot-sdk": "^8.5.0",
  "axios": "^1.6.2",
  "winston": "^3.11.0",
  "dotenv": "^16.3.1"
}
```

## ğŸ³ éƒ¨ç½²æŠ€è¡“æ£§

### é›²ç«¯å¹³å°
- **ä¸»è¦å¹³å°**: Google Cloud Run
- **å®¹å™¨**: Docker
- **ç·¨æ’**: Docker Compose (é–‹ç™¼ç’°å¢ƒ)

### è³‡æ–™åº«éƒ¨ç½²
- **PostgreSQL**: Google Cloud SQL
- **Firebase**: Google Firebase

### ç›£æ§èˆ‡æ—¥èªŒ
- **æ—¥èªŒ**: Google Cloud Logging
- **ç›£æ§**: Google Cloud Monitoring
- **éŒ¯èª¤è¿½è¹¤**: Google Cloud Error Reporting

## ğŸ”’ å®‰å…¨æŠ€è¡“æ£§

### èªè­‰æˆæ¬Š
- **JWT**: ç„¡ç‹€æ…‹èªè­‰
- **Refresh Token**: é•·æœŸæœƒè©±ç®¡ç†
- **å¯†ç¢¼é›œæ¹Š**: bcrypt + salt

### è³‡æ–™ä¿è­·
- **å‚³è¼¸åŠ å¯†**: HTTPS/TLS 1.3
- **è³‡æ–™åŠ å¯†**: AES-256
- **æ•æ„Ÿè³‡æ–™**: ç’°å¢ƒè®Šæ•¸ç®¡ç†

### æ”»æ“Šé˜²è­·
- **é€Ÿç‡é™åˆ¶**: é˜² DDoS
- **è¼¸å…¥é©—è­‰**: é˜²æ³¨å…¥æ”»æ“Š
- **CORS**: è·¨åŸŸä¿è­·
- **å®‰å…¨æ¨™é ­**: Helmet.js

## ğŸ“Š è³‡æ–™åº«è¨­è¨ˆ

### PostgreSQL ä¸»è¦è¡¨æ ¼
```sql
-- ä½¿ç”¨è€…è¡¨
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  humanity_index INTEGER DEFAULT 0,
  is_verified BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- é©—è­‰è¨˜éŒ„è¡¨
CREATE TABLE verifications (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  platform VARCHAR(20) NOT NULL,
  platform_user_id VARCHAR(255) NOT NULL,
  verification_token VARCHAR(255) UNIQUE NOT NULL,
  verification_url TEXT NOT NULL,
  status VARCHAR(20) DEFAULT 'pending',
  humanity_index INTEGER DEFAULT 0,
  passed BOOLEAN DEFAULT FALSE,
  verification_data JSONB DEFAULT '{}',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  completed_at TIMESTAMP NULL
);

-- SBT è¨˜éŒ„è¡¨
CREATE TABLE sbts (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  token_id VARCHAR(255) UNIQUE NOT NULL,
  wallet_address VARCHAR(255) NOT NULL,
  metadata JSONB DEFAULT '{}',
  status VARCHAR(20) DEFAULT 'pending',
  minted_at TIMESTAMP NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### Firebase Realtime Database çµæ§‹
```json
{
  "sessions": {
    "userId": {
      "platform": "telegram",
      "token": "jwt-token",
      "lastActivity": "timestamp",
      "verificationData": {}
    }
  },
  "realtime_stats": {
    "active_users": 0,
    "total_verifications": 0,
    "successful_verifications": 0
  }
}
```

## ğŸŒ API è¨­è¨ˆ

### RESTful API ç«¯é»
```
GET    /api/v1/health                    # å¥åº·æª¢æŸ¥
POST   /api/v1/auth/register             # ä½¿ç”¨è€…è¨»å†Š
POST   /api/v1/auth/login                # ä½¿ç”¨è€…ç™»å…¥
GET    /api/v1/verification/channels     # ç²å–é©—è­‰é¸é …
POST   /api/v1/verification/start        # é–‹å§‹é©—è­‰
POST   /api/v1/verification/callback     # Twin3.ai å›èª¿
GET    /api/v1/verification/status/:token # æª¢æŸ¥é©—è­‰ç‹€æ…‹
POST   /api/v1/sbt/mint                  # é‘„é€  SBT
GET    /api/v1/sbt/metadata/:tokenId     # ç²å– SBT å…ƒæ•¸æ“š
```

## ğŸš€ æ•ˆèƒ½å„ªåŒ–

### å¾Œç«¯å„ªåŒ–
- **é€£æ¥æ± **: PostgreSQL é€£æ¥é‡ç”¨
- **å¿«å–**: Redis (å¯é¸)
- **å£“ç¸®**: gzip å›æ‡‰å£“ç¸®
- **éåŒæ­¥**: Promise-based æ¶æ§‹

### å‰ç«¯å„ªåŒ–
- **ç¨‹å¼ç¢¼åˆ†å‰²**: Vite è‡ªå‹•åˆ†å‰²
- **æ‡¶è¼‰å…¥**: React.lazy + Suspense
- **å¿«å–**: HTTP å¿«å–ç­–ç•¥
- **CDN**: éœæ…‹è³‡æº CDN

### è³‡æ–™åº«å„ªåŒ–
- **ç´¢å¼•**: æŸ¥è©¢æ•ˆèƒ½å„ªåŒ–
- **æŸ¥è©¢å„ªåŒ–**: åŸç”Ÿ SQL å„ªåŒ–
- **åˆ†é **: å¤§è³‡æ–™é›†è™•ç†

---

**Twin Gate æŠ€è¡“æ£§** - ç¾ä»£ã€å®‰å…¨ã€å¯æ“´å±•çš„å…¨ç«¯è§£æ±ºæ–¹æ¡ˆ ğŸš€

æ ¹æ“šæŒ‡å®šçš„æ ¸å¿ƒæŠ€è¡“æ£§æ§‹å»ºï¼Œç¢ºä¿æœ€ä½³çš„é–‹ç™¼é«”é©—å’Œç³»çµ±æ•ˆèƒ½ã€‚
